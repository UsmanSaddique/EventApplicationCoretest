@model EventApplicationCore.Model.IndexViewModel
@using EventApplicationCore.Utility
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@{ Layout = "~/Views/Shared/_LayoutCustomer.cshtml"; }


@*<div class="slider_area">
        <div class=" pt-0 carousel overlay" style="margin-top:-125px;" data-ride="carousel" data-interval="25000">
            <div class="carousel-item active">
                <img src="~/img/banner/banner.png" height="100%" class="d-block w-100" />
            </div>
            <div class="carousel-item">
                <img src="~/img/banner/banner2.png" height="100%" class="d-block w-100" />
            </div>

        </div>
    </div>*@
<div class="row">
    <div class="col-4">
        <div class="col-6">
            <a asp-controller="Order" asp-action="OrderHistory" class=" btn btn-success">
                OrderHistory
            </a>
        </div>

        <div class="col-6">
            @if (HttpContextAccessor.HttpContext.Session.GetInt32("ssShoppingCarCount") != null)
            {

               
                    <a asp-controller="Cart" asp-action="Index" class="nav-link">
                        @{
                            var count = HttpContextAccessor.HttpContext.Session.GetInt32("ssShoppingCarCount");
                        }
                        <i class="fa fa-shopping-cart"></i> &nbsp; (@count)
                    </a>
                

            }
            else
            {
              
                    <a href="#" class="nav-link">

                        <i class="fa fa-shopping-cart"></i> &nbsp; (0)
                    </a>
               
            }

        </div>
    </div>
        @*<ul>

            <li class="bg-success">
           
            </li>


            @if (HttpContextAccessor.HttpContext.Session.GetInt32("ssShoppingCarCount") != null)
            {

                <li class="bg-info" style="color:white">
                    <a asp-controller="Cart" asp-action="Index" class="nav-link">
                        @{
                            var count = HttpContextAccessor.HttpContext.Session.GetInt32("ssShoppingCarCount");
                        }
                        <i class="fa fa-shopping-cart"></i> &nbsp; (@count)
                    </a>
                </li>

            }
            else
            {
                <li style="color:white">
                    <a href="#" class="nav-link">

                        <i class="fa fa-shopping-cart"></i> &nbsp; (0)
                    </a>
                </li>
            }
        </ul>*@
</div>
@*<div id="carouselExampleControls" class="carousel slide " data-ride="carousel" data-interval="1500">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img class="d-block w-100" src="~/Images/carousel/banner-1.jpg" alt="First slide">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100" src="~/Images/carousel/banner-2.jpg" alt="Second slide">
        </div>

    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>*@


<div class="container mt-2">
    <form class="row" method="post" onsubmit="senddata()">
        <div class=" col-9 md-form mt-1  mb-2">
            <input class="form-control " name="data" id="srcbox" type="text" placeholder="Search">
        </div>
        <div class="col-3 md-form mt-1 mb-2">
            <input class="form-control btn " type="submit" asp-action="Search" style="        color: white;
        background-color: #eb4800;" value="Search Category" />
        </div>
    </form>
</div>


<section class="navbar main-menu container" id="top-bar">
    <div class="navbar-inner main-menu @*d-flex justify-content-md-start*@ " style="width:100%">


        <nav id="menu" class="pull-right m-0">
            <ul id="menu-filters" class="m-0">
                <li class="filter active  " style="" data-filter=".menu-restaurant"><a>Show All</a></li>
                @foreach (var item in Model.Category)
                {
                    <li class="filter" style="" data-filter=".@item.Name.Replace(" ",string.Empty)"><a>@item.Name</a></li>
                }



            </ul>

        </nav>

    </div>



    @foreach (var category in Model.Category)
    {
        var menuItems = Model.MenuItem.Where(u => u.Category.Name.Equals(category.Name)).ToList();
        <div class="container " id="menu-wrapper" style="">

            @if (menuItems.Count() > 0)
            {

                <div class=" post container @menuItems.FirstOrDefault().Category.Name.Replace(" ",string.Empty) menu-restaurant">
                    <div class="mt-3">
                        <h2 class="text-danger "><strong>@menuItems.FirstOrDefault().Category.Name</strong></h2>
                    </div>
                    <div class="row">
                        @foreach (var item in menuItems)
                        {

                            <div class="   col-md-4 col-lg-4 col-xl-4 border-left" style="height:80%;width:80%;">
                                <div class=" ">
                                    <div class="">
                                        <div class="el-wrapper">
                                            <div class="box-up">
                                                <img class="img" src="@item.Image" alt="">
                                                <div class="img-info">
                                                    <div class="info-inner">
                                                        <span class="p-name">@item.Name</span>
                                                        <span class="p-company">Sale</span>
                                                    </div>
                                                    <div class="a-size">Available sizes : <span class="size">@Html.Raw(item.Discription)</span></div>
                                                </div>
                                            </div>

                                            <div class="box-down">
                                                <div class="h-bg">
                                                    <div class="h-bg-inner"></div>
                                                </div>

                                                <a asp-action="Details" asp-controller="DBook" asp-route-id="@item.Id" class="cart">
                                                    <span class="price">$ @item.Price</span>
                                                    <span class="add-to-cart">
                                                        <span class="txt bg-info btn btn-large text-white" style="border-radius:3px;">Add in cart</span>
                                                    </span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>








                            <!-- product badge -->

                            @*<div class="col-xl-4 col-md-4 col-lg-4    " style="border-radius:120px;">
                                    <div class="card " style="min-width:200px;">
                                        <div class="card-header border-0">
                                            <img src="@item.Image" alt="" width="270px" style="height:200px;">
                                        </div>
                                        <div class="card-body border-0 ml-2">
                                            <div class="row">
                                                <h4 class="float-left  font-weight-bold">@item.Name</h4>
                                            </div>
                                            <div class="row">
                                                <p>@Html.Raw(item.Discription.Trim())</p>
                                            </div>
                                        </div>
                                        <div class="card-footer border-0 pt-0 pb-0">
                                            <div class="row" style="border: 3px solid #E33B43;">
                                                <div class="col-6 d-flex justify-content-center align-items-center" style=" ">

                                                    <h4 class="text-danger font-weight-bold ">$ @item.Price</h4>
                                                </div>
                                                <div class=" col-6 d-flex justify-content-center align-items-center p-0 hoverRed"
                                                     style="background-color: #E33B43;">
                                                    <a asp-action="Details" asp-controller="Home" asp-area="Customer" style="color:white;" asp-route-id="@item.Id">Add To Cart</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>*@
                        }
                    </div>
                    <div class="p-4"></div>
                </div>
            }
        </div>

    }

</section>








@section Scripts{


    @*<script>

                function senddata() {

                    var categorySelected = $("#srcbox").val();

                    var url = '/Customer/Home/Search/' + categorySelected;
                    console.log(url);


                    $.ajax({
            type: "POST",
            url: '@Url.Action("/Customer/Home/Search/")',
                        contentType: "application/json; charset=utf-8",
                        data: { a: categorySelected },
            dataType: "json",
            success: function() { alert('Success'); }

        });
                }

            </script>*@


    <script>
        var post = $('.post');

        (function ($) {
            $("#menu-filters li").click(function () {
                $("#menu-filters li").removeClass('active');
                $(this).addClass('active ');

                var selectedFilter = $(this).data("filter");
                $(".menu-restaurant").fadeOut();
                setTimeout(function () {
                    $(selectedFilter).slideDown();
                }, 100);

            });


        })(jQuery);
    </script>


}


